/**
 * CharacterWizardBase - Shared Patterns for Wizard Components
 * ============================================================
 * 
 * This base file contains common patterns extracted from 12 wizard components:
 * - SpellManager, EnhancedCharacterWizard, CharacterSheet, LevelUpWizard
 * - SpellSelectionStep, EquipmentSelectionStep, CharacterAdvancementStep
 * - XPTracker, CombatTracker, DiceRoller, CombatDemo, AttackManager
 * 
 * USAGE:
 *   .my-header {
 *     composes: wizard-header from './CharacterWizardBase.module.css';
 *   }
 * 
 * Pattern Categories:
 *   1. Wizard containers (overlays, modals, panels)
 *   2. Headers (gradient, titles, close buttons)
 *   3. Tab systems (navigation, active states)
 *   4. Content sections (cards, grids, layouts)
 *   5. Form elements (inputs, buttons, labels)
 *   6. Status indicators (badges, progress bars)
 * 
 * Design Principles:
 *   - 100% design token usage (zero hardcoded values)
 *   - Composition over duplication
 *   - Professional, consistent patterns
 *   - Accessible by default
 * 
 * @see ../../styles/tokens.css for primitive tokens
 * @see ../../styles/theme.css for semantic tokens
 */

/* ============================================
   1. WIZARD CONTAINERS
   ============================================ */

/**
 * Full-screen overlay for modal wizards
 * Used by: EnhancedCharacterWizard, SpellManager (when modal)
 */
.wizard-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--modal-overlay);
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-md);
  backdrop-filter: blur(8px);
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    backdrop-filter: blur(0px);
  }
  to {
    opacity: 1;
    backdrop-filter: blur(8px);
  }
}

/**
 * Modal container for wizard content
 * Used by: EnhancedCharacterWizard, LevelUpWizard
 */
.wizard-modal {
  background: var(--panel-bg);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  width: 100%;
  max-width: 1200px;
  max-height: 90vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  animation: slideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  position: relative;
}

@keyframes slideIn {
  from {
    transform: translateY(-40px) scale(0.95);
    opacity: 0;
  }
  to {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

/**
 * Standard wizard panel (non-modal)
 * Used by: SpellManager, CharacterSheet, XPTracker
 */
.wizard-panel {
  background: var(--panel-bg);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  overflow: hidden;
  max-width: 1400px;
  margin: 0 auto;
  min-height: 600px;
}

/**
 * Compact wizard panel for smaller components
 * Used by: DiceRoller, CombatLauncher, AttackManager
 */
.wizard-panel-compact {
  background: var(--panel-bg);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  max-width: 800px;
  margin: 0 auto;
}

/* ============================================
   2. HEADERS
   ============================================ */

/**
 * Gradient header - Primary brand style
 * Used by: CharacterSheet, LevelUpWizard, XPTracker
 * Color: Red gradient (#8b0000 → #a00000)
 */
.wizard-header-primary {
  background: linear-gradient(135deg, var(--red-900) 0%, var(--red-800) 100%);
  color: var(--text-inverse-primary);
  padding: var(--space-lg) var(--space-xl);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/**
 * Gradient header - Purple variant
 * Used by: SpellManager
 * Color: Purple gradient (#4a148c → #6a1b9a)
 */
.wizard-header-purple {
  background: linear-gradient(135deg, var(--purple-950) 0%, var(--purple-800) 100%);
  color: var(--text-inverse-primary);
  padding: var(--space-lg) var(--space-xl);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/**
 * Gradient header - Dark neutral
 * Used by: EnhancedCharacterWizard
 * Color: Dark gray (#2c3e50)
 */
.wizard-header-neutral {
  background: var(--gray-800);
  color: var(--text-inverse-primary);
  padding: var(--space-xl) var(--space-lg) var(--space-lg) var(--space-lg);
  position: relative;
  border-bottom: 4px solid var(--color-primary);
}

/**
 * Gradient header - With decorative accent
 * Used by: EnhancedCharacterWizard (rainbow border)
 */
.wizard-header-neutral::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(
    90deg,
    var(--color-primary),
    var(--color-success),
    var(--color-warning),
    var(--color-danger)
  );
}

/**
 * Header title section
 * Used by: All wizard headers
 */
.wizard-header-title {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  flex: 1;
}

/**
 * Main wizard title
 * Used by: All wizard headers
 */
.wizard-title {
  margin: 0 0 var(--space-xs) 0;
  font-size: var(--text-3xl);
  font-weight: var(--font-bold);
  color: var(--text-inverse-primary);
  letter-spacing: -0.5px;
}

/**
 * Wizard subtitle/info text
 * Used by: SpellManager, CharacterSheet
 */
.wizard-subtitle {
  font-size: var(--text-base);
  opacity: 0.9;
  font-weight: var(--font-medium);
  color: var(--text-inverse-primary);
}

/**
 * Close button for wizard modal/panel
 * Used by: All wizard headers
 */
.wizard-close-button {
  background: none;
  border: none;
  color: var(--text-inverse-primary);
  font-size: var(--text-2xl);
  cursor: pointer;
  padding: var(--space-xs);
  opacity: 0.8;
  transition: all var(--transition-fast);
  border-radius: var(--radius-sm);
  flex-shrink: 0;
}

.wizard-close-button:hover {
  opacity: 1;
  background: var(--hover-overlay-light);
}

.wizard-close-button:active {
  background: var(--active-overlay-light);
}

/**
 * Progress bar container
 * Used by: LevelUpWizard, EnhancedCharacterWizard
 */
.wizard-progress-bar {
  width: 100%;
  height: 6px;
  background: var(--progress-bg);
  border-radius: var(--radius-sm);
  overflow: hidden;
  margin-top: var(--space-md);
}

/**
 * Progress bar fill
 * Used by: LevelUpWizard, EnhancedCharacterWizard
 */
.wizard-progress-fill {
  height: 100%;
  background: var(--text-inverse-primary);
  transition: width var(--transition-normal);
  border-radius: var(--radius-sm);
}

/* ============================================
   3. TAB SYSTEMS
   ============================================ */

/**
 * Tab navigation container
 * Used by: SpellManager, CharacterSheet, EnhancedCharacterWizard
 */
.wizard-tabs {
  display: flex;
  background: var(--bg-elevated);
  border-bottom: 2px solid var(--border-primary);
  overflow-x: auto;
}

/**
 * Individual tab button
 * Used by: All wizards with tab navigation
 */
.wizard-tab-button {
  background: none;
  border: none;
  padding: var(--space-md) var(--space-lg);
  font-size: var(--text-base);
  font-weight: var(--font-semibold);
  cursor: pointer;
  transition: all var(--transition-fast);
  color: var(--text-secondary);
  border-bottom: 3px solid transparent;
  white-space: nowrap;
}

.wizard-tab-button:hover {
  background: var(--hover-overlay);
  color: var(--text-primary);
}

/**
 * Active tab state - Primary color
 * Used by: CharacterSheet, LevelUpWizard
 */
.wizard-tab-button-active-primary {
  color: var(--red-800);
  border-bottom-color: var(--red-800);
  background: var(--panel-bg);
}

/**
 * Active tab state - Purple variant
 * Used by: SpellManager
 */
.wizard-tab-button-active-purple {
  color: var(--purple-800);
  border-bottom-color: var(--purple-800);
  background: var(--panel-bg);
}

/**
 * Active tab state - Blue variant
 * Used by: EnhancedCharacterWizard
 */
.wizard-tab-button-active-blue {
  color: var(--color-primary);
  border-bottom-color: var(--color-primary);
  background: var(--panel-bg);
}

/* ============================================
   4. CONTENT SECTIONS
   ============================================ */

/**
 * Main content container
 * Used by: All wizard components
 */
.wizard-content {
  padding: var(--space-xl);
  max-height: 70vh;
  overflow-y: auto;
  overflow-x: hidden;
}

/**
 * Compact content (smaller padding)
 * Used by: LevelUpWizard, DiceRoller
 */
.wizard-content-compact {
  padding: var(--space-lg);
  min-height: 400px;
}

/**
 * Standard card container
 * Used by: All wizard cards, sections
 */
.wizard-card {
  background: var(--panel-bg);
  border-radius: var(--radius-md);
  padding: var(--space-lg);
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border-primary);
}

/**
 * Elevated card (stronger shadow)
 * Used by: Featured sections, important cards
 */
.wizard-card-elevated {
  background: var(--panel-bg);
  border-radius: var(--radius-lg);
  padding: var(--space-xl);
  box-shadow: var(--shadow-md);
  border: 1px solid var(--border-primary);
}

/**
 * Card header
 * Used by: Section headers within cards
 */
.wizard-card-header {
  margin: 0 0 var(--space-md) 0;
  font-size: var(--text-xl);
  font-weight: var(--font-semibold);
  color: var(--text-primary);
}

/**
 * Grid layout - Auto-fit responsive
 * Used by: SpellManager, EquipmentSelection, CharacterSheet
 */
.wizard-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--space-lg);
}

/**
 * Grid layout - Two columns
 * Used by: Character stats, form layouts
 */
.wizard-grid-two-col {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-md);
}

/**
 * Grid layout - Three columns
 * Used by: Ability scores, spell slots
 */
.wizard-grid-three-col {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-md);
}

/**
 * Flex row with gap
 * Used by: Button groups, inline elements
 */
.wizard-row {
  display: flex;
  gap: var(--space-md);
  align-items: center;
}

/**
 * Flex column with gap
 * Used by: Vertical stacking
 */
.wizard-column {
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}

/**
 * Section divider
 * Used by: Content separation
 */
.wizard-divider {
  height: 1px;
  background: var(--border-primary);
  margin: var(--space-lg) 0;
}

/* ============================================
   5. FORM ELEMENTS
   ============================================ */

/**
 * Form group container
 * Used by: All form fields
 */
.wizard-form-group {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

/**
 * Form label
 * Used by: All form inputs
 */
.wizard-form-label {
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  color: var(--text-primary);
  margin-bottom: var(--space-xs);
}

/**
 * Standard text input
 * Used by: All text fields, selects
 */
.wizard-input {
  padding: var(--space-sm) var(--space-md);
  border: 2px solid var(--border-primary);
  border-radius: var(--radius-md);
  font-size: var(--text-base);
  background: var(--input-bg);
  color: var(--text-primary);
  transition: all var(--transition-fast);
}

.wizard-input:hover {
  border-color: var(--border-hover);
}

.wizard-input:focus {
  outline: none;
  border-color: var(--border-focus);
  box-shadow: var(--focus-ring);
}

.wizard-input:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  background: var(--bg-elevated);
}

/**
 * Textarea input
 * Used by: Multiline text fields
 */
.wizard-textarea {
  padding: var(--space-sm) var(--space-md);
  border: 2px solid var(--border-primary);
  border-radius: var(--radius-md);
  font-size: var(--text-base);
  background: var(--input-bg);
  color: var(--text-primary);
  resize: vertical;
  min-height: 100px;
  font-family: inherit;
  transition: all var(--transition-fast);
}

.wizard-textarea:hover {
  border-color: var(--border-hover);
}

.wizard-textarea:focus {
  outline: none;
  border-color: var(--border-focus);
  box-shadow: var(--focus-ring);
}

/**
 * Select dropdown
 * Used by: All dropdown selects
 */
.wizard-select {
  padding: var(--space-sm) var(--space-md);
  border: 2px solid var(--border-primary);
  border-radius: var(--radius-md);
  font-size: var(--text-base);
  background: var(--input-bg);
  color: var(--text-primary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.wizard-select:hover {
  border-color: var(--border-hover);
}

.wizard-select:focus {
  outline: none;
  border-color: var(--border-focus);
  box-shadow: var(--focus-ring);
}

/**
 * Primary action button
 * Used by: Submit, confirm, primary actions
 */
.wizard-button-primary {
  background: linear-gradient(135deg, var(--red-900) 0%, var(--red-800) 100%);
  color: var(--text-inverse-primary);
  padding: var(--space-sm) var(--space-lg);
  border: none;
  border-radius: var(--radius-md);
  font-size: var(--text-base);
  font-weight: var(--font-semibold);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.wizard-button-primary:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.wizard-button-primary:active {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

.wizard-button-primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/**
 * Secondary action button
 * Used by: Cancel, back, secondary actions
 */
.wizard-button-secondary {
  background: var(--bg-elevated);
  color: var(--text-primary);
  padding: var(--space-sm) var(--space-lg);
  border: 2px solid var(--border-primary);
  border-radius: var(--radius-md);
  font-size: var(--text-base);
  font-weight: var(--font-semibold);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.wizard-button-secondary:hover {
  background: var(--hover-overlay);
  border-color: var(--border-hover);
}

.wizard-button-secondary:active {
  background: var(--active-overlay);
}

.wizard-button-secondary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/**
 * Success/confirm button
 * Used by: Save, complete, confirm actions
 */
.wizard-button-success {
  background: linear-gradient(135deg, var(--green-700) 0%, var(--green-600) 100%);
  color: var(--text-inverse-primary);
  padding: var(--space-sm) var(--space-lg);
  border: none;
  border-radius: var(--radius-md);
  font-size: var(--text-base);
  font-weight: var(--font-semibold);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.wizard-button-success:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.wizard-button-success:active {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

/**
 * Danger/delete button
 * Used by: Delete, remove, destructive actions
 */
.wizard-button-danger {
  background: linear-gradient(135deg, var(--red-700) 0%, var(--red-600) 100%);
  color: var(--text-inverse-primary);
  padding: var(--space-sm) var(--space-lg);
  border: none;
  border-radius: var(--radius-md);
  font-size: var(--text-base);
  font-weight: var(--font-semibold);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.wizard-button-danger:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.wizard-button-danger:active {
  transform: translateY(0);
  box-shadow: var(--shadow-sm);
}

/**
 * Small button variant
 * Used by: Inline actions, compact UIs
 */
.wizard-button-small {
  padding: var(--space-xs) var(--space-sm);
  font-size: var(--text-sm);
}

/**
 * Large button variant
 * Used by: Important CTAs
 */
.wizard-button-large {
  padding: var(--space-md) var(--space-xl);
  font-size: var(--text-lg);
}

/**
 * Button group container
 * Used by: Multiple buttons in a row
 */
.wizard-button-group {
  display: flex;
  gap: var(--space-md);
  align-items: center;
  justify-content: flex-end;
  margin-top: var(--space-lg);
}

/* ============================================
   6. STATUS INDICATORS
   ============================================ */

/**
 * Status badge - Success
 * Used by: Active statuses, available items
 */
.wizard-badge-success {
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-full);
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  background: var(--status-success-bg);
  color: var(--status-success-text);
  display: inline-block;
}

/**
 * Status badge - Warning
 * Used by: Warnings, incomplete states
 */
.wizard-badge-warning {
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-full);
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  background: var(--status-warning-bg);
  color: var(--status-warning-text);
  display: inline-block;
}

/**
 * Status badge - Danger
 * Used by: Errors, critical states
 */
.wizard-badge-danger {
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-full);
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  background: var(--status-danger-bg);
  color: var(--status-danger-text);
  display: inline-block;
}

/**
 * Status badge - Info
 * Used by: Information, neutral states
 */
.wizard-badge-info {
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-full);
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  background: var(--status-info-bg);
  color: var(--status-info-text);
  display: inline-block;
}

/**
 * Status badge - Primary
 * Used by: Selected items, primary states
 */
.wizard-badge-primary {
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-full);
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  background: var(--red-900);
  color: var(--text-inverse-primary);
  display: inline-block;
}

/**
 * Loading spinner
 * Used by: Loading states, async operations
 */
.wizard-spinner {
  border: 3px solid var(--border-primary);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/**
 * Loading container
 * Used by: Centered loading states
 */
.wizard-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-3xl) var(--space-lg);
  text-align: center;
}

.wizard-loading p {
  margin-top: var(--space-md);
  font-size: var(--text-lg);
  color: var(--text-secondary);
}

/**
 * Empty state container
 * Used by: No data, empty lists
 */
.wizard-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-3xl) var(--space-lg);
  text-align: center;
  color: var(--text-muted);
}

.wizard-empty-state h3 {
  font-size: var(--text-xl);
  font-weight: var(--font-semibold);
  margin-bottom: var(--space-sm);
  color: var(--text-secondary);
}

.wizard-empty-state p {
  font-size: var(--text-base);
  margin-bottom: var(--space-lg);
}

/* ============================================
   RESPONSIVE UTILITIES
   ============================================ */

/**
 * Mobile adjustments
 */
@media (max-width: 768px) {
  .wizard-modal {
    max-width: 100%;
    margin: 0;
    border-radius: 0;
    max-height: 100vh;
  }

  .wizard-content {
    padding: var(--space-md);
  }

  .wizard-grid {
    grid-template-columns: 1fr;
  }

  .wizard-grid-two-col,
  .wizard-grid-three-col {
    grid-template-columns: 1fr;
  }

  .wizard-button-group {
    flex-direction: column-reverse;
    width: 100%;
  }

  .wizard-button-group button {
    width: 100%;
  }
}

/**
 * Tablet adjustments
 */
@media (min-width: 769px) and (max-width: 1024px) {
  .wizard-grid-three-col {
    grid-template-columns: repeat(2, 1fr);
  }
}
